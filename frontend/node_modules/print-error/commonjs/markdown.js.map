{"version":3,"sources":["../source/markdown.js"],"names":["render","error","groups","stack","groups_markup","map","group","i","list_item_markup","lines","line_markup","line","join","markup","title","Array","length","replace","line_info","file_path","file_name","file_line_number","method_path"],"mappings":";;;;;kBAGwBA,M;;AAHxB;;;;AACA;;;;AAEe,SAASA,MAAT,CAAgBC,KAAhB,EACf;AACC,KAAMC,SAAS,qBAAkBD,MAAME,KAAxB,CAAf;;AAEA,KAAMC,gBAAgBF,OAAOG,GAAP,CAAW,UAACC,KAAD,EAAQC,CAAR,EACjC;AACC,MAAMC,mBAAmBF,MAAMG,KAAN,CAAYJ,GAAZ,CAAgB,gBACzC;AACC,UAAO,QAAQK,YAAYC,IAAZ,CAAf;AACA,GAHwB,EAIxBC,IAJwB,CAInB,MAJmB,CAAzB;;AAMA,MAAMC,sBAEHP,MAAMQ,KAFH,gBAGHC,MAAMT,MAAMQ,KAAN,CAAYE,MAAZ,GAAqB,CAA3B,EAA8BJ,IAA9B,CAAmC,GAAnC,CAHG,YAG2C,uBAASJ,gBAAT,EAA2B,CAA3B,CAH3C,WAAN;;AAMA,SAAO,uBAASK,MAAT,EAAiB,CAAC,CAAlB,CAAP;AACA,EAfqB,EAgBrBD,IAhBqB,CAgBhB,EAhBgB,CAAtB;;AAkBA,QAAOR,cACLa,OADK,CACG,KADH,EACU,EADV,EAELA,OAFK,CAEG,KAFH,EAEU,EAFV,CAAP;AAGA;;AAED,SAASP,WAAT,CAAqBQ,SAArB,EACA;AACC,KAAI,OAAOA,SAAP,KAAqB,QAAzB,EACA;AACC,SAAOA,SAAP;AACA;;AAED,KAAIP,OAAO,EAAX;;AAEA,KAAIO,UAAUC,SAAd,EACA;AACCR,iBAAaO,UAAUE,SAAvB;AACA;;AAED,KAAIF,UAAUG,gBAAd,EACA;AACCV,gBAAYO,UAAUG,gBAAtB;AACA;;AAED,KAAIH,UAAUI,WAAd,EACA;AACC,MAAIX,KAAKK,MAAL,GAAc,CAAlB,EACA;AACCL,WAAQ,GAAR;AACA;;AAEDA,gBAAaO,UAAUI,WAAvB;AACA;;AAED,KAAIJ,UAAUC,SAAd,EACA;AACCR,UAAQ,YAAYO,UAAUC,SAA9B;AACA;;AAED,QAAOR,IAAP;AACA","file":"markdown.js","sourcesContent":["import parse_stack_trace from './parse.js'\r\nimport { tabulate } from './helpers.js'\r\n\r\nexport default function render(error)\r\n{\r\n\tconst groups = parse_stack_trace(error.stack)\r\n\r\n\tconst groups_markup = groups.map((group, i) =>\r\n\t{\r\n\t\tconst list_item_markup = group.lines.map(line =>\r\n\t\t{\r\n\t\t\treturn ' * ' + line_markup(line)\r\n\t\t})\r\n\t\t.join('\\n\\n')\r\n\r\n\t\tconst markup =\r\n\t\t`\r\n\t\t\t${group.title}\r\n\t\t\t${Array(group.title.length + 1).join('=')}\\n\\n${tabulate(list_item_markup, 3)}\r\n\t\t`\r\n\r\n\t\treturn tabulate(markup, -3)\r\n\t})\r\n\t.join('')\r\n\r\n\treturn groups_markup\r\n\t\t.replace(/^\\n/, '')\r\n\t\t.replace(/\\n$/, '')\r\n}\r\n\r\nfunction line_markup(line_info)\r\n{\r\n\tif (typeof line_info === 'string')\r\n\t{\r\n\t\treturn line_info\r\n\t}\r\n\r\n\tlet line = ''\r\n\r\n\tif (line_info.file_path)\r\n\t{\r\n\t\tline += `**${line_info.file_name}**`\r\n\t}\r\n\r\n\tif (line_info.file_line_number)\r\n\t{\r\n\t\tline += `:${line_info.file_line_number}`\r\n\t}\r\n\r\n\tif (line_info.method_path)\r\n\t{\r\n\t\tif (line.length > 0)\r\n\t\t{\r\n\t\t\tline += ' '\r\n\t\t}\r\n\r\n\t\tline += `\\`${line_info.method_path}\\``\r\n\t}\r\n\r\n\tif (line_info.file_path)\r\n\t{\t\r\n\t\tline += '\\n\\n   ' + line_info.file_path\r\n\t}\r\n\r\n\treturn line\r\n}"]}