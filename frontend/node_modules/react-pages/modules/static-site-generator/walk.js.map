{"version":3,"sources":["../../source/static-site-generator/walk.js"],"names":["fs","path","walk","dir","Promise","resolve","reject","readdir","error","files","all","map","file","filepath","join","stat","stats","isDirectory","then","isFile","foldersContents","reduce","folderContents","concat"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA;;;;;AAIA,eAAe,SAASC,IAAT,CAAcC,GAAd,EAAmB;AAChC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCN,IAAAA,EAAE,CAACO,OAAH,CAAWJ,GAAX,EAAgB,UAACK,KAAD,EAAQC,KAAR,EAAkB;AAChC,UAAID,KAAJ,EAAW;AACT,eAAOF,MAAM,CAACE,KAAD,CAAb;AACD;;AACDJ,MAAAA,OAAO,CAACM,GAAR,CAAYD,KAAK,CAACE,GAAN,CAAU,UAACC,IAAD,EAAU;AAC9B,eAAO,IAAIR,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,cAAMO,QAAQ,GAAGZ,IAAI,CAACa,IAAL,CAAUX,GAAV,EAAeS,IAAf,CAAjB;AACAZ,UAAAA,EAAE,CAACe,IAAH,CAAQF,QAAR,EAAkB,UAACL,KAAD,EAAQQ,KAAR,EAAkB;AAClC,gBAAIR,KAAJ,EAAW;AACT,qBAAOF,MAAM,CAACE,KAAD,CAAb;AACD;;AACD,gBAAIQ,KAAK,CAACC,WAAN,EAAJ,EAAyB;AACvBf,cAAAA,IAAI,CAACW,QAAD,CAAJ,CAAeK,IAAf,CAAoBb,OAApB;AACD,aAFD,MAEO,IAAIW,KAAK,CAACG,MAAN,EAAJ,EAAoB;AACzBd,cAAAA,OAAO,CAACQ,QAAD,CAAP;AACD;AACF,WATD;AAUD,SAZM,CAAP;AAaD,OAdW,CAAZ,EAeCK,IAfD,CAeM,UAACE,eAAD,EAAqB;AACzBf,QAAAA,OAAO,CAACe,eAAe,CAACC,MAAhB,CAAuB,UAACX,GAAD,EAAMY,cAAN;AAAA,iBAAyBZ,GAAG,CAACa,MAAJ,CAAWD,cAAX,CAAzB;AAAA,SAAvB,EAA4E,EAA5E,CAAD,CAAP;AACD,OAjBD;AAkBD,KAtBD;AAuBD,GAxBM,CAAP;AAyBD","sourcesContent":["import fs from 'fs'\r\nimport path from 'path'\r\n\r\n/**\r\n * Returns the paths to all files in a directory.\r\n * (walks the subdirectory tree recursively).\r\n */\r\nexport default function walk(dir) {\r\n  return new Promise((resolve, reject) => {\r\n    fs.readdir(dir, (error, files) => {\r\n      if (error) {\r\n        return reject(error);\r\n      }\r\n      Promise.all(files.map((file) => {\r\n        return new Promise((resolve, reject) => {\r\n          const filepath = path.join(dir, file);\r\n          fs.stat(filepath, (error, stats) => {\r\n            if (error) {\r\n              return reject(error);\r\n            }\r\n            if (stats.isDirectory()) {\r\n              walk(filepath).then(resolve);\r\n            } else if (stats.isFile()) {\r\n              resolve(filepath);\r\n            }\r\n          });\r\n        });\r\n      }))\r\n      .then((foldersContents) => {\r\n        resolve(foldersContents.reduce((all, folderContents) => all.concat(folderContents), []));\r\n      });\r\n    });\r\n  });\r\n}"],"file":"walk.js"}