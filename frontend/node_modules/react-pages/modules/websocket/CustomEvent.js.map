{"version":3,"sources":["../../source/websocket/CustomEvent.js"],"names":["CustomEvent","event_name","options","bubbles","cancelable","detail","undefined","event","document","createEvent","initCustomEvent","preventDefault","call","Object","defineProperty","get","error","defaultPrevented","window","prototype","Event","PolyfillCustomEvent","Error"],"mappings":"AAAA;AACA;AACA;AACA;AAEA,SAASA,WAAT,CAAqBC,UAArB,EAAiCC,OAAjC,EACA;AACCA,EAAAA,OAAO,GAAGA,OAAO,IACjB;AACCC,IAAAA,OAAO,EAAM,KADd;AAECC,IAAAA,UAAU,EAAG,KAFd;AAGCC,IAAAA,MAAM,EAAOC;AAHd,GADA,CADD,CAQC;;AACA,MAAMC,KAAK,GAAGC,QAAQ,CAACC,WAAT,CAAqB,aAArB,CAAd;AACAF,EAAAA,KAAK,CAACG,eAAN,CAAsBT,UAAtB,EAAkCC,OAAO,CAACC,OAA1C,EAAmDD,OAAO,CAACE,UAA3D,EAAuEF,OAAO,CAACG,MAA/E,EAVD,CAYC;;AACA,MAAMM,cAAc,GAAGJ,KAAK,CAACI,cAA7B;;AACAJ,EAAAA,KAAK,CAACI,cAAN,GAAuB,YACvB;AACCA,IAAAA,cAAc,CAACC,IAAf,CAAoB,IAApB;;AAEA,QACA;AACCC,MAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,kBAA5B,EACA;AACCC,QAAAA,GADD,iBAEC;AACC,iBAAO,IAAP;AACA;AAJF,OADA;AAOA,KATD,CAUA,OAAOC,KAAP,EACA;AACC,WAAKC,gBAAL,GAAwB,IAAxB;AACA;AACD,GAlBD;;AAoBA,SAAOV,KAAP;AACA,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAI,OAAOW,MAAP,KAAkB,WAAtB,EACA;AACClB,EAAAA,WAAW,CAACmB,SAAZ,GAAwBD,MAAM,CAACE,KAAP,CAAaD,SAArC;AACA;;AAED,eAAe,SAASE,mBAAT,GACf;AACC,MACA;AACC,QAAMd,KAAK,GAAG,IAAIW,MAAM,CAAClB,WAAX,CAAuB,MAAvB,CAAd;AACAO,IAAAA,KAAK,CAACI,cAAN;;AACA,QAAIJ,KAAK,CAACU,gBAAN,KAA2B,IAA/B,EACA;AACC;AACA;AACA,YAAM,IAAIK,KAAJ,CAAU,2BAAV,CAAN;AACA;AACD,GAVD,CAWA,OAAON,KAAP,EACA;AACC;AACA;AACAE,IAAAA,MAAM,CAAClB,WAAP,GAAqBA,WAArB;AACA;AACD","sourcesContent":["// Polyfill for creating CustomEvents on IE9/10/11.\r\n//\r\n// Adapted from `custom-event-polyfill` library on October 9th 2017:\r\n// https://github.com/krambuhl/custom-event-polyfill/blob/master/custom-event-polyfill.js\r\n\r\nfunction CustomEvent(event_name, options)\r\n{\r\n\toptions = options ||\r\n\t{\r\n\t\tbubbles    : false,\r\n\t\tcancelable : false,\r\n\t\tdetail     : undefined\r\n\t}\r\n\r\n\t// IE 11 way of creating a `CustomEvent`\r\n\tconst event = document.createEvent('CustomEvent')\r\n\tevent.initCustomEvent(event_name, options.bubbles, options.cancelable, options.detail)\r\n\r\n\t// Add `defaultPrevented` flag to the event\r\n\tconst preventDefault = event.preventDefault\r\n\tevent.preventDefault = function()\r\n\t{\r\n\t\tpreventDefault.call(this)\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tObject.defineProperty(this, 'defaultPrevented',\r\n\t\t\t{\r\n\t\t\t\tget()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis.defaultPrevented = true\r\n\t\t}\r\n\t}\r\n\r\n\treturn event\r\n}\r\n\r\n// `window` is `undefined` on server side.\r\n// This file will still be included on server side\r\n// because server side still uses common utilities like\r\n// `meta`, `load`, `redirect()`, `goto()`, etc,\r\n// and therefore it does `require('react-pages')`\r\n// which executes `react-pages/index.common.js`\r\n// which in turn executes this `if` condition.\r\nif (typeof window !== 'undefined')\r\n{\r\n\tCustomEvent.prototype = window.Event.prototype\r\n}\r\n\r\nexport default function PolyfillCustomEvent()\r\n{\r\n\ttry\r\n\t{\r\n\t\tconst event = new window.CustomEvent('test')\r\n\t\tevent.preventDefault()\r\n\t\tif (event.defaultPrevented !== true)\r\n\t\t{\r\n\t\t\t// IE has problems with .preventDefault() on custom events\r\n\t\t\t// http://stackoverflow.com/questions/23349191\r\n\t\t\tthrow new Error('Could not prevent default')\r\n\t\t}\r\n\t}\r\n\tcatch (error)\r\n\t{\r\n\t\t// If `CustomEvent` misbehaves (or is absent)\r\n\t\t// then create it from scratch.\r\n\t\twindow.CustomEvent = CustomEvent\r\n\t}\r\n}"],"file":"CustomEvent.js"}