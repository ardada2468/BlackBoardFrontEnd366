{"version":3,"sources":["../../source/router/index.js"],"names":["default","foundReducer","Route","Redirect","useRouter","RedirectException","createMatchEnhancer","Matcher","makeRouteConfig","getStoreRenderArgs","HttpError","resolver","FoundActionTypes","Actions","ActionTypes","createHistoryEnhancer","createBasenameMiddleware","queryMiddleware","markImmediateNavigationAsInstantBack","createRouterStoreEnhancers","routes","createHistoryProtocol","options","middlewares","basename","push","protocol","matchRoutes","store","matchContext","dispatch","getState","then","renderArgs","error","getRoutesByPath","routeIndices","matchedRoutes","i","children","getMatchedRoutes","state","found","match","getMatchedRoutesIndices","getMatchedRoutesParams","routeParams","getCurrentlyMatchedLocation","location","getRouteParams","params","getPreviouslyMatchedLocation","resolvedMatch","getRoutePath","filter","route","path","map","replace","join","convertRoutes","initializeRouter","init","redirect","goto","instantBack","REDIRECT_ACTION_TYPE","REPLACE","GOTO_ACTION_TYPE","PUSH","goBack","go","goForward","pushLocation","window","_react_pages_skip_preload_update_location","replaceLocation","UPDATE_MATCH","RESOLVE_MATCH","_RESOLVE_MATCH"],"mappings":"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","sourcesContent":["export { default as foundReducer } from 'found/foundReducer'\r\nexport { default as Route } from 'found/Route'\r\nexport { default as Redirect } from 'found/Redirect'\r\nexport { default as useRouter } from 'found/useRouter'\r\nexport { default as RedirectException } from 'found/RedirectException'\r\n\r\nimport createMatchEnhancer from 'found/createMatchEnhancer'\r\nimport Matcher from 'found/Matcher'\r\nimport makeRouteConfig from 'found/makeRouteConfig'\r\nimport getStoreRenderArgs from 'found/getStoreRenderArgs'\r\nimport HttpError from 'found/HttpError'\r\nimport resolver from 'found/resolver'\r\nimport FoundActionTypes from 'found/ActionTypes'\r\n\r\nimport Actions from 'farce/Actions'\r\nimport ActionTypes from 'farce/ActionTypes'\r\nimport createHistoryEnhancer from 'farce/createHistoryEnhancer'\r\nimport createBasenameMiddleware from 'farce/createBasenameMiddleware'\r\nimport queryMiddleware from 'farce/queryMiddleware'\r\n\r\nimport { markImmediateNavigationAsInstantBack } from '../redux/client/instantNavigation'\r\n\r\nexport function createRouterStoreEnhancers(routes, createHistoryProtocol, options = {}) {\r\n\tconst middlewares = [\r\n\t\tqueryMiddleware\r\n\t]\r\n\tif (options.basename) {\r\n\t\tmiddlewares.push(createBasenameMiddleware({\r\n\t\t\tbasename: options.basename\r\n\t\t}))\r\n\t}\r\n\treturn [\r\n\t\tcreateHistoryEnhancer({\r\n\t\t\tprotocol: createHistoryProtocol(),\r\n\t\t\tmiddlewares\r\n\t\t}),\r\n\t\tcreateMatchEnhancer(\r\n\t\t\t// new Matcher(hotRouteConfig(routes))\r\n\t\t\tnew Matcher(routes)\r\n\t\t)\r\n\t]\r\n}\r\n\r\nexport function matchRoutes(store) {\r\n\treturn getStoreRenderArgs({\r\n\t\tstore,\r\n\t\tresolver,\r\n\t\tmatchContext: {\r\n\t\t\tdispatch: store.dispatch,\r\n\t\t\tgetState: store.getState\r\n\t\t}\r\n\t})\r\n\t.then((renderArgs) => {\r\n\t\tif (renderArgs.error) {\r\n\t\t\tthrow renderArgs.error\r\n\t\t}\r\n\t\treturn renderArgs\r\n\t})\r\n}\r\n\r\nexport function getRoutesByPath(routeIndices, routes) {\r\n\tconst matchedRoutes = []\r\n\tfor (const i of routeIndices) {\r\n\t\tmatchedRoutes.push(routes[i])\r\n\t\troutes = routes[i].children\r\n\t}\r\n\treturn matchedRoutes\r\n}\r\n\r\nexport function getMatchedRoutes(state, routes) {\r\n\treturn getRoutesByPath(state.found.match.routeIndices, routes)\r\n}\r\n\r\nexport function getMatchedRoutesIndices(state) {\r\n\treturn state.found.match.routeIndices\r\n}\r\n\r\nexport function getMatchedRoutesParams(state) {\r\n\treturn state.found.match.routeParams\r\n}\r\n\r\nexport function getCurrentlyMatchedLocation(state) {\r\n\treturn state.found.match.location\r\n}\r\n\r\nexport function getRouteParams(state) {\r\n\treturn state.found.match.params\r\n}\r\n\r\nexport function getPreviouslyMatchedLocation(state) {\r\n\treturn state.found.resolvedMatch &&\r\n\t\t// state.found.resolvedMatch.location.key === undefined &&\r\n\t\tstate.found.resolvedMatch.location\r\n}\r\n\r\n// Returns a complete route path for matched routes chain.\r\n// E.g. returns \"/user/:user_id/post/:post_id\"\r\n// for matched URL \"/user/1/post/123?key=value\".\r\nexport function getRoutePath(routes)\r\n{\r\n\treturn routes\r\n\t\t// Select routes having `path` React property set.\r\n\t\t.filter(route => route.path)\r\n\t\t// Trim leading and trailing slashes (`/`)\r\n\t\t// from each route `path` React property.\r\n\t\t.map(route => route.path.replace(/^\\//, '').replace(/\\/$/, ''))\r\n\t\t// Join route `path`s with slashes (`/`).\r\n\t\t.join('/') || '/'\r\n}\r\n\r\nexport function convertRoutes(routes) {\r\n\treturn makeRouteConfig(routes)\r\n}\r\n\r\nexport function initializeRouter(store) {\r\n\tstore.dispatch(Actions.init())\r\n}\r\n\r\nexport const redirect = Actions.replace\r\n\r\nexport const goto = (location, options = {}) => {\r\n\tmarkImmediateNavigationAsInstantBack(options.instantBack)\r\n\treturn Actions.push(location)\r\n}\r\n\r\nexport const REDIRECT_ACTION_TYPE = ActionTypes.REPLACE\r\nexport const GOTO_ACTION_TYPE = ActionTypes.PUSH\r\n\r\nexport function goBack() {\r\n\treturn Actions.go(-1)\r\n}\r\n\r\nexport function goForward() {\r\n\treturn Actions.go(1)\r\n}\r\n\r\nexport function pushLocation(location, options) {\r\n\twindow._react_pages_skip_preload_update_location = true\r\n\treturn goto(location, options)\r\n}\r\n\r\nexport function replaceLocation(location) {\r\n\twindow._react_pages_skip_preload_update_location = true\r\n\treturn redirect(location)\r\n}\r\n\r\nexport const UPDATE_MATCH = FoundActionTypes.UPDATE_MATCH\r\nexport const RESOLVE_MATCH = FoundActionTypes.RESOLVE_MATCH\r\n\r\nexport const _RESOLVE_MATCH = '@@react-pages/RESOLVE_MATCH'"],"file":"index.js"}