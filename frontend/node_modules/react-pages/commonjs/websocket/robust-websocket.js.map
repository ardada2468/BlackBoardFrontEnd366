{"version":3,"sources":["../../source/websocket/robust-websocket.js"],"names":["window","RobustWebSocket","url","protocols","userOptions","realWs","close","connectTimeout","self","attempts","reconnects","reconnectWhenOnlineAgain","explicitlyClosed","pendingReconnect","opts","Object","assign","defaultOptions","shouldReconnect","timeout","Error","forEach","readOnlyProp","defineProperty","get","clearPendingReconnectIfNeeded","clearTimeout","ononline","event","reconnect","onoffline","connectivityEventsAttached","detachConnectivityEvents","global","removeEventListener","attachConnectivityEvents","addEventListener","send","apply","arguments","code","reason","open","readyState","WebSocket","OPEN","CONNECTING","newWebSocket","handle1000","navigator","onLine","delay","setTimeout","value","enumerable","undefined","binaryType","dispatchEvent","CustomEvent","stdEvent","cb","ignoreConnectivityEvents","automaticOpen","ws","prototype","type","callback","listeners","push","stack","i","l","length","splice","call"],"mappings":"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","sourcesContent":["// Copy-pasted from `robust-websocket` library:\r\n// https://github.com/appuri/robust-websocket/blob/master/robust-websocket.js\r\n// A copy from October 9th 2017.\r\n//\r\n// Changes:\r\n//\r\n// * `robust-websocket` uses `CustomEvent` which is not supported in Internet Explorer: replaced it with `./CustomEvent.js` polyfill.\r\n//\r\n// * Rewrote it with a proper ES6 export. Otherwise it would throw `navigator is undefined` on server side. https://github.com/appuri/robust-websocket/issues/9\r\n\r\n// `robust-websocket` uses `CustomEvent`\r\n// which is not supported in Internet Explorer.\r\nimport PolyfillCustomEvent from './CustomEvent'\r\n\r\n// Polyfill `CustomEvent` for Internet Explorer.\r\n//\r\n// `window` is `undefined` on server side.\r\n// This file will still be included on server side\r\n// because server side still uses common utilities like\r\n// `meta`, `load`, `redirect()`, `goto()`, etc,\r\n// and therefore it does `require('react-pages')`\r\n// which executes `react-pages/index.common.js`\r\n// which in turn executes this `if` condition.\r\n//\r\nif (typeof window !== 'undefined')\r\n{\r\n  PolyfillCustomEvent()\r\n}\r\n\r\nexport default function RobustWebSocket(url, protocols, userOptions) {\r\n  var realWs = { close: function() {} },\r\n      connectTimeout,\r\n      self = this,\r\n      attempts = 0,\r\n      reconnects = -1,\r\n      reconnectWhenOnlineAgain = false,\r\n      explicitlyClosed = false,\r\n      pendingReconnect,\r\n      opts = Object.assign({},\r\n        RobustWebSocket.defaultOptions,\r\n        typeof userOptions === 'function' ? { shouldReconnect: userOptions } : userOptions\r\n      )\r\n\r\n  if (typeof opts.timeout !== 'number') {\r\n    throw new Error('timeout must be the number of milliseconds to timeout a connection attempt')\r\n  }\r\n\r\n  if (typeof opts.shouldReconnect !== 'function') {\r\n    throw new Error('shouldReconnect must be a function that returns the number of milliseconds to wait for a reconnect attempt, or null or undefined to not reconnect.')\r\n  }\r\n\r\n  ['bufferedAmount', 'url', 'readyState', 'protocol', 'extensions'].forEach(function(readOnlyProp) {\r\n    Object.defineProperty(self, readOnlyProp, {\r\n      get: function() { return realWs[readOnlyProp] }\r\n    })\r\n  })\r\n\r\n  function clearPendingReconnectIfNeeded() {\r\n    if (pendingReconnect) {\r\n      clearTimeout(pendingReconnect)\r\n      pendingReconnect = null\r\n    }\r\n  }\r\n\r\n  var ononline = function(event) {\r\n    if (reconnectWhenOnlineAgain) {\r\n      clearPendingReconnectIfNeeded()\r\n      reconnect(event)\r\n    }\r\n  },\r\n  onoffline = function() {\r\n    reconnectWhenOnlineAgain = true\r\n    realWs.close(1000)\r\n  },\r\n  connectivityEventsAttached = false\r\n\r\n  function detachConnectivityEvents() {\r\n    if (connectivityEventsAttached) {\r\n      global.removeEventListener('online', ononline)\r\n      global.removeEventListener('offline', onoffline)\r\n      connectivityEventsAttached = false\r\n    }\r\n  }\r\n\r\n  function attachConnectivityEvents() {\r\n    if (!connectivityEventsAttached) {\r\n      global.addEventListener('online', ononline)\r\n      global.addEventListener('offline', onoffline)\r\n      connectivityEventsAttached = true\r\n    }\r\n  }\r\n\r\n  self.send = function() {\r\n    return realWs.send.apply(realWs, arguments)\r\n  }\r\n\r\n  self.close = function(code, reason) {\r\n    if (typeof code !== 'number') {\r\n      reason = code\r\n      code = 1000\r\n    }\r\n\r\n    clearPendingReconnectIfNeeded()\r\n    reconnectWhenOnlineAgain = false\r\n    explicitlyClosed = true\r\n    detachConnectivityEvents()\r\n\r\n    return realWs.close(code, reason)\r\n  }\r\n\r\n  self.open = function() {\r\n    if (realWs.readyState !== WebSocket.OPEN && realWs.readyState !== WebSocket.CONNECTING) {\r\n      clearPendingReconnectIfNeeded()\r\n      reconnectWhenOnlineAgain = false\r\n      explicitlyClosed = false\r\n\r\n      newWebSocket()\r\n    }\r\n  }\r\n\r\n  function reconnect(event) {\r\n    if ((!opts.shouldReconnect.handle1000 && event.code === 1000) || explicitlyClosed) {\r\n      attempts = 0\r\n      return\r\n    }\r\n    if (navigator.onLine === false) {\r\n      reconnectWhenOnlineAgain = true\r\n      return\r\n    }\r\n\r\n    var delay = opts.shouldReconnect(event, self)\r\n    if (typeof delay === 'number') {\r\n      pendingReconnect = setTimeout(newWebSocket, delay)\r\n    }\r\n  }\r\n\r\n  Object.defineProperty(self, 'listeners', {\r\n    value: {\r\n      open: [function(event) {\r\n        if (connectTimeout) {\r\n          clearTimeout(connectTimeout)\r\n          connectTimeout = null\r\n        }\r\n        event.reconnects = ++reconnects\r\n        event.attempts = attempts\r\n        attempts = 0\r\n        reconnectWhenOnlineAgain = false\r\n      }],\r\n      close: [reconnect]\r\n    }\r\n  })\r\n\r\n  Object.defineProperty(self, 'attempts', {\r\n    get: function() { return attempts },\r\n    enumerable: true\r\n  })\r\n\r\n  Object.defineProperty(self, 'reconnects', {\r\n    get: function() { return reconnects },\r\n    enumerable: true\r\n  })\r\n\r\n  function newWebSocket() {\r\n    pendingReconnect = null\r\n    realWs = new WebSocket(url, protocols || undefined)\r\n    realWs.binaryType = self.binaryType\r\n\r\n    attempts++\r\n    self.dispatchEvent(Object.assign(new CustomEvent('connecting'), {\r\n      attempts: attempts,\r\n      reconnects: reconnects\r\n    }))\r\n\r\n    connectTimeout = setTimeout(function() {\r\n      connectTimeout = null\r\n      detachConnectivityEvents()\r\n      self.dispatchEvent(Object.assign(new CustomEvent('timeout'), {\r\n        attempts: attempts,\r\n        reconnects: reconnects\r\n      }))\r\n    }, opts.timeout)\r\n\r\n    ;['open', 'close', 'message', 'error'].forEach(function(stdEvent) {\r\n      realWs.addEventListener(stdEvent, function(event) {\r\n        self.dispatchEvent(event)\r\n\r\n        var cb = self['on' + stdEvent]\r\n        if (typeof cb === 'function') {\r\n          return cb.apply(self, arguments)\r\n        }\r\n      })\r\n    })\r\n\r\n    if (!opts.ignoreConnectivityEvents) {\r\n      attachConnectivityEvents()\r\n    }\r\n  }\r\n\r\n  if (opts.automaticOpen) {\r\n    newWebSocket()\r\n  }\r\n}\r\n\r\nRobustWebSocket.defaultOptions = {\r\n  // the time to wait before a successful connection\r\n  // before the attempt is considered to have timed out\r\n  timeout: 4000,\r\n  // Given a CloseEvent or OnlineEvent and the RobustWebSocket state,\r\n  // should a reconnect be attempted? Return the number of milliseconds to wait\r\n  // to reconnect (or null or undefined to not), rather than true or false\r\n  shouldReconnect: function(event, ws) {\r\n    if (event.code === 1008 || event.code === 1011) return\r\n    return [0, 3000, 10000][ws.attempts]\r\n  },\r\n\r\n  // Flag to control whether attachement to navigator online/offline events\r\n  // should be disabled.\r\n  ignoreConnectivityEvents: false,\r\n\r\n  // Create and connect the WebSocket when the instance is instantiated.\r\n  // Defaults to true to match standard WebSocket behavior\r\n  automaticOpen: true\r\n}\r\n\r\nRobustWebSocket.prototype.binaryType = 'blob'\r\n\r\n// Taken from MDN https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\r\nRobustWebSocket.prototype.addEventListener = function(type, callback) {\r\n  if (!(type in this.listeners)) {\r\n    this.listeners[type] = []\r\n  }\r\n  this.listeners[type].push(callback)\r\n}\r\n\r\nRobustWebSocket.prototype.removeEventListener = function(type, callback) {\r\n  if (!(type in this.listeners)) {\r\n    return\r\n  }\r\n  var stack = this.listeners[type]\r\n  for (var i = 0, l = stack.length; i < l; i++) {\r\n    if (stack[i] === callback) {\r\n      stack.splice(i, 1)\r\n      return\r\n    }\r\n  }\r\n}\r\n\r\nRobustWebSocket.prototype.dispatchEvent = function(event) {\r\n  if (!(event.type in this.listeners)) {\r\n    return\r\n  }\r\n  var stack = this.listeners[event.type]\r\n  for (var i = 0, l = stack.length; i < l; i++) {\r\n    stack[i].call(this, event)\r\n  }\r\n}"],"file":"robust-websocket.js"}